function formplate(e){var t=function(e){var t={body:e.getElementsByTagName("body")[0],html:e.getElementsByTagName("html")[0]},o=function(e,t){var o=e.className;null===o.match(new RegExp("\\b"+t+"\\b","g"))&&(e.className=""===o?t:o+" "+t)},l=function(e){e.removeAttribute("class")},c=function(e,t){e.className.indexOf(t)>-1&&(e.className=e.className.split(" ").filter(function(e){return e!=t}).toString().replace(/,/g," "),""===e.className&&l(e))},a=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},r=function(){return"ontouchstart"in window||"onmsgesturechange"in window},n=function(t,o,l){var c=e.createElement(o),a=t.cloneNode(!0);c.className=l,t.parentNode.insertBefore(c,t).appendChild(a),t.parentNode.removeChild(t)};return{classAdd:o,classClear:l,classRemove:c,element:t,hasClass:a,isTouch:r,wrap:n}}(document),o=this;o.options={selector:e&&e.selector?e.selector:$formplateDefault.selector,colour:e&&e.colour?e.colour:!1};var l=o.options.colour||t.element.body.getAttribute("data-formplate-colour")||$formplateDefault.colour,c=document.querySelectorAll(o.options.selector+' input[type="checkbox"]'),a=document.querySelectorAll(o.options.selector+' input[type="radio"]'),r=document.querySelectorAll(o.options.selector+" select"),n=document.createElement("span");n.className="handle",t.isTouch()||t.hasClass(t.element.html,"formplate-no-touch")||t.classAdd(t.element.html,"formplate-no-touch"),t.classAdd(t.element.body,"formplate-colour-"+l);for(var s=0;s<c.length;s++){var m=t.hasClass(c[s],"toggler")===!0?"formplate-toggler":"formplate-checkbox";m+="checked"===c[s].getAttribute("checked")?" checked":"",t.hasClass(c[s].parentNode,"formplate-toggler")||t.hasClass(c[s].parentNode,"formplate-checkbox")||t.wrap(c[s],"span",m)}for(var d=document.querySelectorAll(o.options.selector+" .formplate-toggler"),s=0;s<d.length;s++)d[s].appendChild(n.cloneNode());for(var s=0;s<a.length;s++){var m="checked"===a[s].getAttribute("checked")?"formplate-radio checked":"formplate-radio";t.hasClass(a[s].parentNode,"formplate-radio")||t.wrap(a[s],"span",m)}for(var s=0;s<r.length;s++)t.hasClass(r[s].parentNode,"formplate-select")||t.wrap(r[s],"span","formplate-select");for(var u=document.querySelectorAll(o.options.selector+" .formplate-checkbox"),s=0;s<u.length;s++)(function(e){u[e].onclick=function(){t.hasClass(u[e],"checked")?t.classRemove(u[e],"checked"):t.classAdd(u[e],"checked")}})(s);for(var p=document.querySelectorAll(o.options.selector+" .formplate-radio"),s=0;s<p.length;s++)(function(e){p[e].onclick=function(){for(var o=p[e].getElementsByTagName("input")[0].getAttribute("name"),l=document.querySelectorAll('input[name="'+o+'"]'),c=0;c<l.length;c++)t.classRemove(l[c].parentNode,"checked");t.classAdd(p[e],"checked")}})(s);for(var i=document.querySelectorAll(o.options.selector+" .formplate-toggler"),s=0;s<i.length;s++)(function(e){i[e].onclick=function(){t.hasClass(i[e],"checked")?t.classRemove(i[e],"checked"):t.classAdd(i[e],"checked")}})(s)}var $formplateDefault={selector:"body",colour:"blue"};